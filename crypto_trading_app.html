<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Trading Pro - Simulateur</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        header {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .balance-section {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .balance-box {
            background: rgba(255,255,255,0.1);
            padding: 15px 25px;
            border-radius: 10px;
            flex: 1;
            min-width: 200px;
        }
        .balance-label {
            font-size: 0.9em;
            color: #cbd5e1;
        }
        .balance-value {
            font-size: 2em;
            font-weight: bold;
            color: #4ade80;
        }
        .dashboard {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        .card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .card h2 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #ffd700;
        }
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        .crypto-card {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        .crypto-card:hover {
            border-color: #ffd700;
            transform: translateY(-3px);
        }
        .crypto-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .crypto-name {
            font-weight: bold;
            font-size: 1.2em;
        }
        .crypto-symbol {
            font-size: 0.9em;
            color: #cbd5e1;
        }
        .crypto-price {
            color: #4ade80;
            font-size: 1.3em;
            font-weight: bold;
            margin: 10px 0;
        }
        .crypto-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            margin: 8px 0;
        }
        .holding-info {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
        }
        .signal {
            padding: 6px 12px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.85em;
            display: inline-block;
        }
        .signal-buy {
            background: #10b981;
        }
        .signal-sell {
            background: #ef4444;
        }
        .signal-hold {
            background: #f59e0b;
        }
        .positive {
            color: #4ade80;
        }
        .negative {
            color: #ef4444;
        }
        .tweet-feed {
            max-height: 500px;
            overflow-y: auto;
        }
        .tweet {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid transparent;
        }
        .tweet.bullish {
            border-left-color: #10b981;
        }
        .tweet.bearish {
            border-left-color: #ef4444;
        }
        .tweet-author {
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .tweet-content {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        .tweet-sentiment {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: bold;
        }
        .sentiment-positive {
            background: #10b981;
        }
        .sentiment-negative {
            background: #ef4444;
        }
        .sentiment-neutral {
            background: #6b7280;
        }
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 15px;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: transform 0.2s;
            flex: 1;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .buy-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .sell-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        .trade-history {
            max-height: 300px;
            overflow-y: auto;
        }
        .trade-item {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .volume-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
        }
        .volume-bar {
            flex: 1;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            overflow: hidden;
        }
        .volume-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #ffd700);
            transition: width 0.3s;
        }
        .auto-trade-section {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
            margin-left: 10px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #10b981;
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.9);
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 4px solid #10b981;
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s;
        }
        @keyframes slideIn {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }
        .allocation-chart {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .allocation-item {
            background: rgba(0,0,0,0.3);
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 100px;
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>
    
    <div class="container">
        <header>
            <h1>🚀 Crypto Trading Pro - Mode Simulation</h1>
            <p>Trading automatique basé sur Volume & Sentiment Twitter</p>
            
            <div class="balance-section">
                <div class="balance-box">
                    <div class="balance-label">Capital Initial</div>
                    <div class="balance-value">5 000 €</div>
                </div>
                <div class="balance-box">
                    <div class="balance-label">Valeur Actuelle</div>
                    <div class="balance-value" id="currentValue">5 000 €</div>
                </div>
                <div class="balance-box">
                    <div class="balance-label">Profit/Perte</div>
                    <div class="balance-value" id="profitLoss">0 €</div>
                </div>
                <div class="balance-box">
                    <div class="balance-label">Liquidités</div>
                    <div class="balance-value" id="cashBalance">0 €</div>
                </div>
            </div>

            <div class="auto-trade-section">
                <label style="display: flex; align-items: center;">
                    <span style="font-weight: bold; font-size: 1.1em;">🤖 Trading Automatique</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoTradeToggle" onchange="toggleAutoTrade()">
                        <span class="slider"></span>
                    </label>
                    <span id="autoTradeStatus" style="margin-left: 15px; color: #cbd5e1;">Désactivé</span>
                </label>
            </div>
        </header>

        <div class="dashboard">
            <div class="card">
                <h2>💼 Mon Portfolio</h2>
                <div class="crypto-grid" id="portfolioGrid"></div>
                
                <h2 style="margin-top: 30px;">📊 Répartition du Capital</h2>
                <div class="allocation-chart" id="allocationChart"></div>
            </div>

            <div>
                <div class="card" style="margin-bottom: 20px;">
                    <h2>🐦 Sentiment Twitter - Influenceurs</h2>
                    <div class="tweet-feed" id="tweetFeed"></div>
                </div>

                <div class="card">
                    <h2>📝 Historique des Trades</h2>
                    <div class="trade-history" id="tradeHistory"></div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>📈 Évolution du Portfolio</h2>
            <div class="chart-container">
                <canvas id="portfolioChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Configuration initiale
        const INITIAL_CAPITAL = 5000;
        let cashBalance = 0;
        let autoTradeEnabled = false;
        let tradeCount = 0;

        // Cryptos à trader
        const cryptos = [
            { symbol: 'BTC', name: 'Bitcoin', price: 67234, holdings: 0, allocation: 0 },
            { symbol: 'ETH', name: 'Ethereum', price: 3456, holdings: 0, allocation: 0 },
            { symbol: 'LINK', name: 'Chainlink', price: 14.52, holdings: 0, allocation: 0 },
            { symbol: 'KRL', name: 'Kryll', price: 0.85, holdings: 0, allocation: 0 },
            { symbol: 'ADA', name: 'Cardano', price: 0.52, holdings: 0, allocation: 0 },
            { symbol: 'XRP', name: 'Ripple', price: 0.61, holdings: 0, allocation: 0 },
            { symbol: 'EGLD', name: 'MultiversX', price: 52.30, holdings: 0, allocation: 0 }
        ];

        const influencers = [
            'Elon Musk', 'Michael Saylor', 'Vitalik Buterin', 
            'CZ Binance', 'Cathie Wood', 'Jack Dorsey',
            'Anthony Pompliano', 'Changpeng Zhao', 'Brian Armstrong'
        ];

        let tradeHistory = [];
        let portfolioHistory = [INITIAL_CAPITAL];

        // Initialisation - Diversification automatique
        function initializePortfolio() {
            const perCrypto = INITIAL_CAPITAL / cryptos.length;
            
            cryptos.forEach(crypto => {
                const amount = perCrypto / crypto.price;
                crypto.holdings = amount;
                crypto.allocation = (perCrypto / INITIAL_CAPITAL) * 100;
                
                addTradeToHistory('ACHAT', crypto.symbol, amount, crypto.price, 'Initialisation');
            });
            
            updateDisplay();
            showNotification('✅ Portfolio initialisé avec 5000€ diversifiés!');
        }

        // Calcul de la valeur totale
        function calculateTotalValue() {
            return cryptos.reduce((total, crypto) => {
                return total + (crypto.holdings * crypto.price);
            }, 0) + cashBalance;
        }

        // Mise à jour de l'affichage
        function updateDisplay() {
            const totalValue = calculateTotalValue();
            const profitLoss = totalValue - INITIAL_CAPITAL;
            const profitLossPercent = ((profitLoss / INITIAL_CAPITAL) * 100).toFixed(2);

            document.getElementById('currentValue').textContent = `${totalValue.toFixed(2)} €`;
            document.getElementById('profitLoss').textContent = 
                `${profitLoss >= 0 ? '+' : ''}${profitLoss.toFixed(2)} € (${profitLossPercent}%)`;
            document.getElementById('profitLoss').className = 
                `balance-value ${profitLoss >= 0 ? 'positive' : 'negative'}`;
            document.getElementById('cashBalance').textContent = `${cashBalance.toFixed(2)} €`;

            updatePortfolioGrid();
            updateAllocationChart();
        }

        // Mise à jour de la grille de cryptos
        function updatePortfolioGrid() {
            const grid = document.getElementById('portfolioGrid');
            
            grid.innerHTML = cryptos.map(crypto => {
                const signal = generateSignal(crypto);
                const change = (Math.random() - 0.5) * 10;
                const changeClass = change > 0 ? 'positive' : 'negative';
                const changeSymbol = change > 0 ? '+' : '';
                const volume = Math.floor(Math.random() * 100);
                const holdingValue = crypto.holdings * crypto.price;
                
                return `
                    <div class="crypto-card">
                        <div class="crypto-header">
                            <div>
                                <div class="crypto-name">${crypto.symbol}</div>
                                <div class="crypto-symbol">${crypto.name}</div>
                            </div>
                            <span class="signal ${signal.class}">${signal.text}</span>
                        </div>
                        
                        <div class="crypto-price">${crypto.price.toFixed(2)} €</div>
                        
                        <div class="crypto-stats">
                            <span class="${changeClass}">${changeSymbol}${change.toFixed(2)}%</span>
                            <span>Vol: ${volume}%</span>
                        </div>
                        
                        <div class="volume-indicator">
                            <div class="volume-bar">
                                <div class="volume-fill" style="width: ${volume}%"></div>
                            </div>
                        </div>
                        
                        ${crypto.holdings > 0 ? `
                            <div class="holding-info">
                                <div><strong>Quantité:</strong> ${crypto.holdings.toFixed(4)}</div>
                                <div><strong>Valeur:</strong> ${holdingValue.toFixed(2)} €</div>
                            </div>
                        ` : '<div style="text-align: center; color: #cbd5e1; margin-top: 10px;">Aucune position</div>'}
                        
                        <div class="action-buttons">
                            <button class="buy-btn" onclick="executeTrade('${crypto.symbol}', 'buy')">
                                📈 Acheter
                            </button>
                            ${crypto.holdings > 0 ? `
                                <button class="sell-btn" onclick="executeTrade('${crypto.symbol}', 'sell')">
                                    📉 Vendre
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Graphique de répartition
        function updateAllocationChart() {
            const chart = document.getElementById('allocationChart');
            const totalValue = calculateTotalValue();
            
            chart.innerHTML = cryptos.map(crypto => {
                const value = crypto.holdings * crypto.price;
                const percent = totalValue > 0 ? ((value / totalValue) * 100).toFixed(1) : 0;
                
                return `
                    <div class="allocation-item">
                        <div style="font-size: 1.5em; font-weight: bold;">${percent}%</div>
                        <div style="color: #cbd5e1; margin-top: 5px;">${crypto.symbol}</div>
                        <div style="font-size: 0.85em; color: #4ade80;">${value.toFixed(2)} €</div>
                    </div>
                `;
            }).join('');
        }

        // Génération de signaux
        function generateSignal(crypto) {
            const volumeScore = Math.random();
            const sentimentScore = Math.random();
            const priceAction = Math.random();
            const combined = (volumeScore + sentimentScore + priceAction) / 3;
            
            if (combined > 0.65) return { text: 'ACHAT', class: 'signal-buy', action: 'buy' };
            if (combined < 0.35) return { text: 'VENTE', class: 'signal-sell', action: 'sell' };
            return { text: 'HOLD', class: 'signal-hold', action: 'hold' };
        }

        // Exécution d'un trade
        function executeTrade(symbol, action) {
            const crypto = cryptos.find(c => c.symbol === symbol);
            if (!crypto) return;

            const tradeAmount = 100; // 100€ par trade
            
            if (action === 'buy') {
                const quantity = tradeAmount / crypto.price;
                crypto.holdings += quantity;
                cashBalance -= tradeAmount;
                addTradeToHistory('ACHAT', symbol, quantity, crypto.price, 'Manuel');
                showNotification(`✅ Acheté ${quantity.toFixed(4)} ${symbol} pour ${tradeAmount}€`);
            } else if (action === 'sell' && crypto.holdings > 0) {
                const quantity = Math.min(crypto.holdings, tradeAmount / crypto.price);
                const value = quantity * crypto.price;
                crypto.holdings -= quantity;
                cashBalance += value;
                addTradeToHistory('VENTE', symbol, quantity, crypto.price, 'Manuel');
                showNotification(`✅ Vendu ${quantity.toFixed(4)} ${symbol} pour ${value.toFixed(2)}€`);
            }
            
            updateDisplay();
        }

        // Historique des trades
        function addTradeToHistory(type, symbol, quantity, price, mode) {
            const value = quantity * price;
            tradeHistory.unshift({
                type,
                symbol,
                quantity,
                price,
                value,
                mode,
                time: new Date().toLocaleTimeString()
            });
            
            if (tradeHistory.length > 20) tradeHistory.pop();
            updateTradeHistory();
        }

        function updateTradeHistory() {
            const history = document.getElementById('tradeHistory');
            
            if (tradeHistory.length === 0) {
                history.innerHTML = '<div style="text-align: center; color: #cbd5e1;">Aucun trade pour le moment</div>';
                return;
            }
            
            history.innerHTML = tradeHistory.map(trade => `
                <div class="trade-item">
                    <div>
                        <div style="font-weight: bold; color: ${trade.type === 'ACHAT' ? '#10b981' : '#ef4444'}">
                            ${trade.type} ${trade.symbol}
                        </div>
                        <div style="font-size: 0.85em; color: #cbd5e1;">
                            ${trade.quantity.toFixed(4)} @ ${trade.price.toFixed(2)}€
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-weight: bold;">${trade.value.toFixed(2)} €</div>
                        <div style="font-size: 0.85em; color: #cbd5e1;">${trade.mode} - ${trade.time}</div>
                    </div>
                </div>
            `).join('');
        }

        // Trading automatique
        function toggleAutoTrade() {
            autoTradeEnabled = document.getElementById('autoTradeToggle').checked;
            document.getElementById('autoTradeStatus').textContent = 
                autoTradeEnabled ? '✅ Activé' : '❌ Désactivé';
            
            if (autoTradeEnabled) {
                showNotification('🤖 Trading automatique activé!');
            }
        }

        function autoTrade() {
            if (!autoTradeEnabled) return;
            
            cryptos.forEach(crypto => {
                const signal = generateSignal(crypto);
                
                if (signal.action === 'buy' && cashBalance >= 100) {
                    const quantity = 100 / crypto.price;
                    crypto.holdings += quantity;
                    cashBalance -= 100;
                    addTradeToHistory('ACHAT', crypto.symbol, quantity, crypto.price, 'Auto');
                } else if (signal.action === 'sell' && crypto.holdings > 0) {
                    const quantity = Math.min(crypto.holdings * 0.2, crypto.holdings);
                    const value = quantity * crypto.price;
                    crypto.holdings -= quantity;
                    cashBalance += value;
                    addTradeToHistory('VENTE', crypto.symbol, quantity, crypto.price, 'Auto');
                }
            });
            
            updateDisplay();
        }

        // Génération de tweets
        function generateTweets() {
            const messages = {
                positive: [
                    'Bitcoin va exploser! Le momentum est incroyable 🚀',
                    'ETH 2.0 change la donne. Bullish sur le long terme! 💎',
                    'Le volume augmente massivement. Nouveaux ATH en approche!',
                    'Les institutions accumulent. Le bull run commence! 📈',
                    'LINK va être énorme avec les smart contracts! 🔗',
                    'ADA montre une force incroyable. Hodl! 💪'
                ],
                negative: [
                    'Attention, les baleines vendent. Soyez prudents! ⚠️',
                    'Le volume baisse dangereusement. Possible correction.',
                    'Les indicateurs techniques sont au rouge. 📉',
                    'Trop de leverage sur le marché. Prudence!',
                    'Momentum baissier sur plusieurs altcoins. 🐻'
                ],
                neutral: [
                    'Marché latéral pour le moment. Attendons les signaux.',
                    'Volume stable. Pas de mouvement majeur prévu.',
                    'Consolidation en cours. Patience requise.',
                    'Les marchés digèrent les nouvelles. Wait and see.'
                ]
            };

            const sentiments = ['positive', 'negative', 'neutral'];
            const feed = document.getElementById('tweetFeed');
            const tweets = [];
            
            for (let i = 0; i < 8; i++) {
                const sentiment = sentiments[Math.floor(Math.random() * sentiments.length)];
                const author = influencers[Math.floor(Math.random() * influencers.length)];
                const message = messages[sentiment][Math.floor(Math.random() * messages[sentiment].length)];
                
                tweets.push(`
                    <div class="tweet ${sentiment === 'positive' ? 'bullish' : sentiment === 'negative' ? 'bearish' : ''}">
                        <div class="tweet-author">
                            <span>@${author.replace(' ', '')}</span>
                            <span style="font-size: 0.8em; color: #cbd5e1;">· ${Math.floor(Math.random() * 60)}min</span>
                        </div>
                        <div class="tweet-content">${message}</div>
                        <span class="tweet-sentiment sentiment-${sentiment}">
                            ${sentiment === 'positive' ? '📈 Bullish' : 
                              sentiment === 'negative' ? '📉 Bearish' : '➡️ Neutre'}
                        </span>
                    </div>
                `);
            }
            
            feed.innerHTML = tweets.join('');
        }

        // Notification
        function showNotification(message) {
            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.style.display = 'block';
            setTimeout(() => {
                notif.style.display = 'none';
            }, 3000);
        }

        // Simulation de variations de prix
        function updatePrices() {
            cryptos.forEach(crypto => {
                const variation = (Math.random() - 0.48) * 0.02;
                crypto.price *= (1 + variation);
            });
            
            const totalValue = calculateTotalValue();
            portfolioHistory.push(totalValue);
            if (portfolioHistory.length > 50) portfolioHistory.shift();
            
            updateDisplay();
            updateChart();
        }

        // Graphique du portfolio
        let portfolioChart;
        function initChart() {
            const ctx = document.getElementById('portfolioChart').getContext('2d');
            portfolioChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: portfolioHistory.map((_, i) => i),
                    datasets: [{
                        label: 'Valeur Portfolio (€)',
                        data: portfolioHistory,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            labels: { color: '#fff' }
                        }
                    },
                    scales: {
                        y: {
                            ticks: { color: '#fff' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        x: {
                            display: false
                        }
                    }
                }
            });
        }

        function updateChart() {
            if (portfolioChart) {
                portfolioChart.data.labels = portfolioHistory.map((_, i) => i);
                portfolioChart.data.datasets[0].data = portfolioHistory;
                portfolioChart.update('none');
            }
        }

        // Initialisation
        initializePortfolio();
        initChart();
        generateTweets();

        // Mises à jour automatiques
        setInterval(updatePrices, 3000); // Prix toutes les 3s
        setInterval(autoTrade, 10000); // Auto-trade toutes les 10s
        setInterval(generateTweets, 15000); // Tweets toutes les 15s
    </script>
</body>
</html>